if(typeof tgConfig=="undefined")var tgConfig=[];keyConfig="page_type|product_id|product_name|product_price|product_originalPrice|category_id|category_name|category_hierarchy_ids|category_product_ids|products_added|products_removed|basket_products|order_id|order_price|order_priceWT|order_deliveryPrice|order_first|order_coupon|event_registration|event_newsletter|user_id|user_email|user_lastname|user_firstname|user_gender|product_added_id|product_added_category_id|product_added|product_removed|event_registration|event_newsletter|custom_city".split("|");for(var i in keyConfig){if(!tgConfig.hasOwnProperty(keyConfig[i])){tgConfig[keyConfig[i]]=""}}function tgCdomain(){var currentDoc=document;try{currentDoc=top.document}catch(e){}var arrayDomain=currentDoc.domain.toLowerCase().split(".");if(arrayDomain.length<2){return""}else{return"."+arrayDomain[arrayDomain.length-2]+"."+arrayDomain[arrayDomain.length-1]}}function tgCookieSet(name,value,expireDays,path,domain,secure){if(!domain){domain=tgCdomain()}if(expireDays){ex=new Date;ex.setTime(ex.getTime()+expireDays*1e3*60*60*24)}document.cookie=name+"="+escape(value)+(expireDays?";expires="+ex:"")+(path?";path="+path:";path=/")+(domain?";domain="+domain:"")+(secure?";secure":"")}function tgCookieGet(cookieName){var result="";var cookies=document.cookie.split(";");var result="";for(var i=0;i<cookies.length;i++){arrayCookie=cookies[i].split("=");cookieCurrentName=arrayCookie[0].replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(cookieCurrentName==cookieName){arrayCookieLength=arrayCookie.length;if(arrayCookieLength>1){for(var j=1;j<arrayCookieLength;j++){result+=unescape(arrayCookie[j].replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(j<arrayCookieLength-1){result+="="}}}break}}return result}function tgCookieRemove(name){tgCookieSet(name,"",-1)}function tgCatchParam(param,url){param=param.toLowerCase();var tgCarray_url_vars=new Array;if(!url){var my_doc="";try{my_doc=top.document}catch(e){my_doc=document}url=my_doc.location.href}var start_split=0;var start_split_1=url.indexOf("?");var start_split_2=url.indexOf("#");if(start_split_1!=-1)start_split=start_split_1;else if(start_split_2!=-1)start_split=start_split_2;var temp_location="";if(start_split!=0){temp_location=url.substring(start_split+1,url.length).split("#").join("&")}temp_location=temp_location.replace(/%3d/g,"=");var temp_array=temp_location.split("&");for(var i=0;i<temp_array.length;i++){temp_array2=temp_array[i].split("=");tgCarray_url_vars[temp_array2[0].toLowerCase()]=temp_array2[1]}return tgCarray_url_vars[param]!=undefined?tgCarray_url_vars[param]:""}function tgCall(tracker,httpcode,httpscode,index,type,launcher){switch(type){case"script":tgCinsertscript(tracker,httpcode,httpscode,index,launcher);break;case"image":tgCinsertimage(tracker,httpcode,httpscode,index);break;case"iframe":tgCinsertiframe(tracker,httpcode,httpscode);break;case"code":tgCinsertcode(tracker);break}}function tgCinsertscript(script,httpcode,httpscode,id,launcher){var tgCscript=document.createElement("script");tgCscript.type="text/javascript";tgCscript.async=true;tgCscript.id=id;tgCscript.src=("https:"==document.location.protocol?httpscode:httpcode)+script;var emascript=document.getElementsByTagName("script")[0];emascript.parentNode.insertBefore(tgCscript,emascript);if(launcher!="null"&&launcher!=null&&launcher!=undefined){eval(launcher)}}function tgCinsertimage(src,httpcode,httpscode,nb){(window.Image?new Image:document.createElement("img")).src=("https:"==document.location.protocol?httpscode:httpcode)+src}function tgCinsertiframe(src,httpcode,httpscode){var iframe=document.createElement("iframe");iframe.style.display="none";iframe.style.width="1";iframe.style.height="1";iframe.style.border="0";iframe.src=("https:"==document.location.protocol?httpscode:httpcode)+src;(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.getElementsByTagName("script")[0].parentNode).appendChild(iframe)}function tgCinsertcode(content){document.write(unescape(content))}var tgCrandom=Math.round(Math.random()*1e9);var tgCreferrer="";function tgCampaignTrack(sources,freeLastClick){var utm_source=tgCatchParam("utm_source").toLowerCase();var utm_medium=tgCatchParam("utm_medium").toLowerCase();var utm_campaign=tgCatchParam("utm_campaign").toLowerCase();var tgCS="";var isFreeTraffic=false;tgCreferrer=escape(document.referrer.toLowerCase());var referer_domain=tgCreferrer.split("/")[2];var current_domain=window.location.host;if(tgCatchParam("gclid").toLowerCase()!=""){utm_source="google"}if(tgCatchParam("yclid").toLowerCase()!=""){utm_source="yandex"}if(utm_source!="null"&&utm_source!=null&&utm_source!=undefined&&utm_source!=""){tgCLastClickSourceSet(utm_source);for(var i=0;i<freeLastClick.length;i++){if(tgCampaignMatch(freeLastClick[i],utm_source,utm_medium,utm_campaign)){isFreeTraffic=true;break}}if(!isFreeTraffic){for(var i=0;i<sources.length;i++){if(tgCampaignMatch(sources[i],utm_source,utm_medium,utm_campaign)){tgCS=sources[i].source_name;break}}if(tgCS!=""){tgCAffiliateSourceSet(tgCS)}}}else if(!(current_domain!=referer_domain&&tgCreferrer!=null&&tgCreferrer!=undefined&&tgCreferrer!="null"&&tgCreferrer!="")){tgCreferrer="unknown"}}function tgCampaignMatch(sourceInfo,utm_source,utm_medium,utm_campaign){result=false;source=sourceInfo.source.toLowerCase();medium=sourceInfo.medium.toLowerCase();campaign=sourceInfo.campaign.toLowerCase();if(source==utm_source){if(medium!=""){if(medium==utm_medium){if(campaign!=""){if(campaign==utm_campaign){result=true}}else{result=true}}}else{result=true}}return result}function tgCAffiliateSource(){return tgCookieGet("tgCas")}function tgCAffiliateSourceSet(tgCas){return tgCookieSet("tgCas",tgCas,30)}function tgCLastClickSource(){return tgCookieGet("tgClc")}function tgCLastClickSourceSet(tgClc){return tgCookieSet("tgClc",tgClc,30)}var freeSources=[];var dedupSources=[];tgCampaignTrack(dedupSources,freeSources);tgCookieList=[];tgCookieList.push("uid");tgCookieList.push("actionpay");tgCookieList.push("click_id");tgCookieList.push("tduid");if(typeof tgCookieList!="undefined"){for(var i=0;i<tgCookieList.length;i++){cookie_key=tgCookieList[i];cookie_value=tgCatchParam(cookie_key,false);if(cookie_value!=""){tgCookieSet("tgC"+cookie_key,cookie_value,30,false,false,false)}}}if(tgCatchParam("tgCtest")=="1"){tgCookieSet("tgCtest",1,7,false,false,false)}if(tgCookieGet("tgCtest")=="1"){if(window.console&&window.console.log){console.log("Display page type "+tgConfig.page_type);console.log(tgConfig);console.log(JSON.stringify(tgConfig,function(name,val){if(val===""){return undefined}else{return val}}," "))}}(function(){if(tgConfig.custom_city==="tyumen"||tgConfig.custom_city==="chelyabinsk"||tgConfig.custom_city==="ntagil"||tgConfig.custom_city==="ekaterinburg"){!function(e,t,d,s,a,n,c){e[a]={},e[a].date=(new Date).getTime(),n=t.createElement(d),c=t.getElementsByTagName(d)[0],n.type="text/javascript",n.async=!0,n.src=s,c.parentNode.insertBefore(n,c)}(window,document,"script","https://holodilnikru.push.world/https.embed.js","pw"),pw.websiteId="d5ecce9f6eb93966a04f20280db9e164a498a1b9937e518c914b32a5f64deedd"}})();var hashRtbHouse="T5dIJAR2kzqiULl5l1hn";var rtbHouseCity=get_rtbhouse_city(tgConfig.custom_city);({sid:216252,bt:62,custom:{153:tgConfig.user_id}});window._retag=window._retag||[];var ad_category=ad_category||"";var ad_product=ad_product||"";var ad_products=ad_products||"";var ad_order=ad_order||"";var ad_amount=ad_amount||"";if(tgConfig.page_type=="home"){window.APRT_DATA={pageType:1};tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_home","http://","https://",200,"iframe");window._retag.push({code:"9ce88879aa",level:0})}else if(tgConfig.page_type=="category"){window.APRT_DATA={pageType:3,currentCategory:{id:tgConfig.category_id,name:tgConfig.category_name}};tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_category2_"+tgConfig.category_id,"http://","https://",200,"iframe");window._retag.push({code:"9ce88879a9",level:1});ad_category=tgConfig.category_id}else if(tgConfig.page_type=="product"){window.APRT_DATA={pageType:2,currentProduct:{id:tgConfig.product_id,name:tgConfig.product_name,price:tgConfig.product_price},currentCategory:{id:tgConfig.category_id,name:tgConfig.category_name}};tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_offer_"+tgConfig.product_id+"@"+rtbHouseCity,"http://","https://",200,"iframe");ad_product={id:tgConfig.product_id,vendor:"",price:tgConfig.product_price,url:window.location.href,picture:"",name:tgConfig.product_name,category:tgConfig.category_id};window._retag.push({code:"9ce88879a8",level:2})}else if(tgConfig.page_type=="cart"){var products_retargetingActionPay=build_apret_products(tgConfig.basket_products);window.APRT_DATA={pageType:4,basketProducts:products_retargetingActionPay};if(tgConfig.basket_products.length>0){var adpilot_list_ids=build_rtbhouse_products_city(tgConfig.basket_products,rtbHouseCity);tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_basketstatus_"+adpilot_list_ids,"http://","https://",200,"iframe")}window._retag.push({code:"9ce88879af",level:3});ad_products=build_retag_products(tgConfig.basket_products)}else if(tgConfig.page_type=="order"){try{var currentLastClick=tgCLastClickSource();var products_retargetingActionPay=build_apret_products(tgConfig.basket_products);window.APRT_DATA={pageType:6,purchasedProducts:products_retargetingActionPay,orderInfo:{id:tgConfig.order_id,totalPrice:tgConfig.order_price}};var deduplicationRTBHouse="true";if(currentLastClick=="rtbhouse"){deduplicationRTBHouse="false"}if(tgConfig.basket_products.length>0){var adpilot_list_ids=build_rtbhouse_products_city(tgConfig.basket_products,rtbHouseCity);tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_orderstatus2_"+tgConfig.order_price+"_"+tgConfig.order_id+"_"+adpilot_list_ids+"&cd="+deduplicationRTBHouse,"http://","https://",200,"iframe")}window._retag.push({code:"9ce88879ae",level:4});ad_order=tgConfig.order_id;ad_amount=tgConfig.order_price;ad_products=build_retag_products(tgConfig.basket_products);switch(currentLastClick){case"admitad":var cpamit_uid=tgCookieGet("tgCuid");var oldcustomer="0";var tariff_code="1";if(tgConfig.order_first=="0"){oldcustomer="1"}admActionCode="1";(function(d,w){w._admitadPixel={response_type:"img",action_code:admActionCode,campaign_code:"d37733f903"};w._admitadPositions=build_admitad_products(cpamit_uid,tgConfig.order_id,tgConfig.user_id,oldcustomer,tgConfig.basket_products);if(w._admitadPositions.length==0){admitadPositions.push({uid:cpamit_uid,order_id:tgConfig.order_id,position_id:1,client_id:tgConfig.user_id,tariff_code:"1",currency_code:"RUB",position_count:1,price:tgConfig.order_price,quantity:1,product_id:1,screen:"",tracking:"",old_customer:oldcustomer,coupon:"",payment_type:"sale"})}var id="_admitad-pixel";if(d.getElementById(id)){return}var s=d.createElement("script");s.id=id;var r=(new Date).getTime();var protocol=d.location.protocol==="https:"?"https:":"http:";s.src=protocol+"//cdn.asbmit.com/static/js/pixel.min.js?r="+r;d.head.appendChild(s)})(document,window);break;case"cityads":break;case"actionpay":case"addigital_electrolux":var actionpay=tgCookieGet("tgCactionpay");var apId="12652";var commissionAP=tgConfig.order_price*.017;var urlAP="apypx.com/ok/"+apId+".png?actionpay="+actionpay+"&apid="+tgConfig.order_id+"&totalPrice="+tgConfig.order_price+"&price="+commissionAP;tgCall(urlAP,"http://","https://",665,"image");break;case"doubletrade":break;case"gdeslon":tgCall("www.gdeslon.ru/thanks.js?codes="+products_gdeslon+"&order_id="+tgConfig.order_id+"&merchant_id=80533","http://","https://",251,"script");break;case"advertise":break;case"mixmarket":break;case"tradetracker":ttConversionOptions={type:"sales",campaignID:"28310",productID:"42224",transactionID:tgConfig.order_id,transactionAmount:tgConfig.order_price,quantity:"1",descrAffiliate:"",currency:"RUB"};(function(ttConversionOptions){var campaignID="campaignID"in ttConversionOptions?ttConversionOptions.campaignID:"length"in ttConversionOptions&&ttConversionOptions.length?ttConversionOptions[0].campaignID:null;var tt=document.createElement("script");tt.type="text/javascript";tt.async=true;tt.src="//tm.tradetracker.net/conversion?s="+encodeURIComponent(campaignID)+"&t=m";var s=document.getElementsByTagName("script");s[s.length-1].parentNode.insertBefore(tt,s[s.length-1])})(ttConversionOptions);break}}catch(err){if(tgCookieGet("tgCtest")=="1"){if(window.console&&window.console.log){console.log("Error on order page "+err.message)}}}tgCookieRemove("tgCS");tgCAffiliateSourceSet("(not set)");tgCookieRemove("tgClc");if(typeof tgCookieList!="undefined"){for(var i=0;i<tgCookieList.length;i++){cookie_key=tgCookieList[i];tgCookieRemove("tgC"+cookie_key)}}}else if(tgConfig.page_type=="search"){var rtbh_products=arrayToString(tgConfig.category_product_ids,",");tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_listing_"+rtbh_products,"http://","https://",200,"iframe")}else{if(/\/orders\/new/.exec(document.location.pathname)){window.APRT_DATA={pageType:5};tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_startorder","http://","https://",200,"iframe")}else{tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"&amp;ncm=1","http://","https://",200,"iframe");window.APRT_DATA={pageType:0}}}(function(w,d){try{var el="getElementsByTagName",rs="readyState";if(d[rs]!=="interactive"&&d[rs]!=="complete"){var c=arguments.callee;return setTimeout(function(){c(w,d)},100)}var s=d.createElement("script");s.type="text/javascript";s.async=s.defer=true;s.src="//aprtx.com/code/holodilnik.ru/";var p=d[el]("body")[0]||d[el]("head")[0];if(p)p.appendChild(s)}catch(x){if(w.console)w.console.log(x)}})(window,document);(function(){var id="admitad-retag";if(document.getElementById(id)){return}var s=document.createElement("script");s.async=true;s.id=id;var r=(new Date).getDate();s.src=(document.location.protocol=="https:"?"https:":"http:")+"//cdn.lenmit.com/static/js/retag.js?r="+r;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)})();function tgCallProductAdded(product_id,category_id){tgCallEvent("product_add",[{id:product_id,category_id:category_id,quantity:1}])}function tgCallProductRemoved(product_id,category_id){tgCallEvent("product_remove",[{id:product_id,category_id:category_id,quantity:1}])}function tgCallProductViewed(product_id,product_name,product_price,category_id,category_name){tgCallEvent("product_view",{id:product_id,name:product_name,price:product_price,category_id:category_id,category_name:category_name,originalPrice:product_price})}if(tgConfig.product_added!=""){tgCallEvent("product_add",tgConfig.product_added)}if(tgConfig.product_removed!=""){tgCallEvent("product_remove",tgConfig.product_removed)}if(tgConfig.event_registration!=""){tgCallEvent("user_registration",tgConfig.event_registration)}if(tgConfig.event_newsletter!=""){tgCallEvent("user_newsletter",tgConfig.event_newsletter)}function tgCallOrderDone(tgConfigOrder){keyConfig="page_type|product_id|product_name|product_price|product_originalPrice|category_id|category_name|category_hierarchy_ids|category_product_ids|products_added|products_removed|basket_products|order_id|order_price|order_priceWT|order_deliveryPrice|order_first|order_coupon|event_registration|event_newsletter|user_id|user_email| user_lastname|user_firstname|user_gender|product_added_id|product_added_category_id".split("|");for(var i in keyConfig){if(!tgConfigOrder.hasOwnProperty(keyConfig[i])){tgConfigOrder[keyConfig[i]]=""}}tgCallEvent("order_done",tgConfigOrder)}function tgCallEvent(event_type,data){if(tgCookieGet("tgCtest")=="1"){if(window.console&&window.console.log){console.log("Event type "+event_type);console.log(data);console.log(JSON.stringify(data,function(name,val){if(val===""){return undefined}else{return val}}," "))}}if(data instanceof Array){var size_data=data.length;for(var i=0;i<size_data;i++){tgCallEvent(event_type,data[i])}}eventKeys="id|name|price|quantity|category_id|category_name|user_id|user_email".split("|");for(var i in eventKeys){if(!data.hasOwnProperty(eventKeys[i])){data[eventKeys[i]]=""}}switch(event_type){case"product_view":window.APRT_DATA={pageType:7,currentProduct:{id:data.id,name:data.name,price:data.price},currentCategory:{id:data.category_id,name:data.category_name}};tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_offer_"+data.id+"@"+rtbHouseCity,"http://","https://",200,"iframe");break;case"product_add":if(data.id!=""){window.APRT_DATA={pageType:8,currentProduct:{id:data.id,name:data.name,price:data.price}};tgCall("creativecdn.com/tags?id=pr_"+hashRtbHouse+"_basketadd_"+data.id+"@"+rtbHouseCity,"http://","https://",200,"iframe")}break;case"product_remove":window.APRT_DATA={pageType:9,currentProduct:{id:data.id,name:data.name,price:data.price}};break;case"user_registration":break;case"user_newsletter":break}}function callGoogleTrackConversion(config){var iterations=0;var interval=setInterval(function(){if(iterations>=40){clearInterval(interval)}iterations++;if(typeof window.google_trackConversion==="undefined"||typeof window.google_trackConversion!=="function"){return}clearInterval(interval);window.google_trackConversion(config)},50)}function build_criteo_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];var item={id:product,price:price,quantity:qty};result.push(item)}return result}function build_etargeting_product_list(basket_products){var size_product=basket_products.length;var result="";for(var i=0;i<size_product;i++){product=basket_products[i]["id"];result+=product;if(i<size_product-1){result+=","}}return result}function build_sociomantic_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];var item={identifier:product,amount:price,currency:"RUB",quantity:qty};result.push(item)}return result}function build_cityads_product_qty_list(basket_products){var size_product=basket_products.length;var result_product="";var result_qty="";var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];result_product+=product;if(i<size_product-1){result_product+=","}qty=basket_products[i]["quantity"];result_qty+=qty;if(i<size_product-1){result_qty+=","}}var result_item={products:result_product,qtys:result_qty};result.push(result_item);return result}function build_cityads_products(basket_products){size_product=basket_products.length;result="";if(size_product>0){result="[";for(var i=0;i<size_product;i++){product=basket_products[i]["id"];product_name=basket_products[i]["name"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];result+='{"pid":"'+product+'","pn":"'+product_name+'","up":"'+price+'","pc":"","qty":"'+qty+'"}';if(i<size_product-1){result+=","}}result+="]"}return encodeURIComponent(result)}function build_gdeslon_products(basket_products,with_beginning_number,with_price){var size_product=basket_products.length;var result="";if(with_beginning_number==1){var result="001,"}for(var i=0;i<size_product;i++){product=basket_products[i]["id"];qty=basket_products[i]["quantity"];for(var j=0;j<qty;j++){result+=product;if(with_price==1){result+=":"+basket_products[i]["price"]}if(j<qty-1){result+=","}}if(i<size_product-1){result+=","}}return result}function build_netaffiliation_products(basket_products){var size_product=basket_products.length;var result="";for(var i=0;i<size_product;i++){product=basket_products[i]["id"];qty=basket_products[i]["quantity"];for(var j=0;j<qty;j++){result+=product;if(j<qty-1){result+=","}}if(i<size_product-1){result+=","}}return result}function build_apret_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];name=basket_products[i]["name"];var item={id:product,name:name,price:price,quantity:qty};result.push(item)}return result}function build_flocktory_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];title=basket_products[i]["name"];image=basket_products[i]["image"];var item={id:product,title:title,image:image,price:price,count:qty};result.push(item)}return result}function build_yandexmetrika_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];title=basket_products[i]["name"];var item={name:product,id:product,price:price,brand:"xxx",category:"xxx",quantity:qty};result.push(item)}return result}function build_retailrocket_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];price=basket_products[i]["price"];qty=basket_products[i]["quantity"];var item={id:product,price:price,qnt:qty};result.push(item)}return result}function build_rtbhouse_products(basket_products){var size_product=basket_products.length;var result="";for(var i=0;i<size_product;i++){result+=basket_products[i]["id"];if(i<size_product-1){result+=","}}return result}function build_rtbhouse_products_city(basket_products,custom_city){var size_product=basket_products.length;var result="";for(var i=0;i<size_product;i++){result+=basket_products[i]["id"]+"@"+custom_city;if(i<size_product-1){result+=","}}return result}function get_rtbhouse_city(city){var result=city;switch(city){case"moscow":result="msk";break;case"sankt-peterburg":result="spb";break}return result}function build_string_products_parameter(basket_products,parameter){return build_string_products_parameter_with_delimiter(basket_products,parameter,",")}function build_string_products_parameter_with_delimiter(basket_products,parameter,delimiter){var size_product=basket_products.length;var result="";for(var i=0;i<size_product;i++){result+=basket_products[i][parameter];if(i<size_product-1){result+=delimiter}}return result}function build_array_products_parameter(basket_products,parameter){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){value=basket_products[i][parameter];result.push(value)}return result}function build_admitad_products(cpamit_uid,order_id,user_id,oldcustomer,basket_products){admitadPositions=[];var size_product=basket_products.length;for(var i=0;i<size_product;i++){admitadPositions.push({uid:cpamit_uid,order_id:order_id,position_id:i+1,client_id:user_id,tariff_code:"1",currency_code:"RUB",position_count:size_product,price:basket_products[i]["price"],quantity:basket_products[i]["quantity"],product_id:basket_products[i]["id"],screen:"",tracking:"",old_customer:oldcustomer,coupon:"",payment_type:"sale"})}return admitadPositions}function build_retag_products(basket_products){var size_product=basket_products.length;var result=new Array;for(var i=0;i<size_product;i++){product=basket_products[i]["id"];qty=basket_products[i]["quantity"];var item={id:product,number:qty};result.push(item)}return result}function getCartPrice(basket_products){var result=0;var size_product=basket_products.length;for(var i=0;i<size_product;i++){price=basket_products[i]["price"];qty=basket_products[i]["quantity"];result+=price*qty}return result}function getCartQty(basket_products){var result=0;var size_product=basket_products.length;for(var i=0;i<size_product;i++){qty=basket_products[i]["quantity"];result+=qty}return result}function tgCgenUUID(){timeMs=Date.now();return timeMs+"-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}function arrayToString(array_value,delimiter){var size_array=array_value.length;result="";for(var i=0;i<size_array;i++){value=array_value[i];result+=value;if(i<size_array-1){result+=delimiter}}return result}function arrayToStringWithCity(array_value,delimiter){var size_array=array_value.length;result="";for(var i=0;i<size_array;i++){value=array_value[i]+"@"+rtbHouseCity;result+=value;if(i<size_array-1){result+=delimiter}}return result}function validateArray(value,delimiter){if(!(value instanceof Array))value=value.split(delimiter);return value}function mobilecheck(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check}function tgCutmsMatch(sourceInfo,utm_source,utm_medium,utm_campaign){result=false;source=sourceInfo.source.toLowerCase();medium=sourceInfo.medium.toLowerCase();campaign=sourceInfo.campaign.toLowerCase();if(source==utm_source){if(medium!=""){if(medium==utm_medium){if(campaign!=""){if(campaign.indexOf("*")>-1){campaign=campaign.replace(/\*/gi,"");if(utm_campaign.indexOf(campaign)>-1){result=true}}else{if(campaign==utm_campaign){result=true}}}else{result=true}}}else{result=true}}return result}function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md51(s){txt="";var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i;for(var i=64;i<=s.length;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(var i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(var i=0;i<16;i++)tail[i]=0}tail[14]=n*8;md5cycle(state,tail);return state}function md5blk(s){var md5blks=[],i;for(var i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}function rhex(n){var hex_chr="0123456789abcdef".split("");var s="",j=0;for(;j<4;j++)s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15];return s}function hex(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}function md5(s){return hex(md51(s))}function add32(a,b){return a+b&4294967295}if(md5("hello")!="5d41402abc4b2a76b9719d911017c592"){function add32(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}if(!Date.now){Date.now=function(){return(new Date).getTime()}}function generateRandomEmail(){return"xxxxxxxxxxxxxxxxxxxxx@randomemail.tmp".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}